name: 'Update Check Run'
description: 'Create or update a check run for CCTP E2E Tests'
inputs:
  github-token:
    description: 'GitHub token'
    required: true
  status:
    description: 'Status of the check run (in_progress or completed)'
    required: true
  conclusion:
    description: 'Conclusion of the check run (success, failure, etc.)'
    required: false
  details-url:
    description: 'URL for more details'
    required: false
runs:
  using: 'composite'
  steps:
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
    - name: Install Dependencies
      run: npm ci
      shell: bash
      working-directory: ./.github/actions/update-check-run
    - name: Run Action
      run: node index.js
      shell: bash
      working-directory: ./.github/actions/update-check-run
      env:
        INPUT_GITHUB-TOKEN: ${{ inputs.github-token }}
        INPUT_STATUS: ${{ inputs.status }}
        INPUT_CONCLUSION: ${{ inputs.conclusion }}
        INPUT_DETAILS-URL: ${{ inputs.details-url }}